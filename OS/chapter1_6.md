## 1.6 虚拟机

### 1.6.1 虚拟机的基本概念

虚拟机是一台逻辑计算机，是指利用特殊的虚拟化技术，通过隐藏特定计算平台的实际物理特性，为用户提供抽象的、统一的、模拟的计算环境。

1.   **第一类虚拟机管理程序**

     第一类虚拟机管理程序就是一个操作系统，运行在最高特权级的程序。在裸机上运行并具备多道程序功能。虚拟机管理程序向上层提供若干台虚拟机，这些虚拟机是裸机硬件的精确复制品。虚拟机作为用户态的一个程序进行，不允许执行敏感指令。虚拟机上的用户进程认为自己运行在内核，称为虚拟内核态。虚拟机中的用户进程认为自己运行在用户态。

2.   第二类虚拟机管理程序

     第二类虚拟机管理程序依赖于Windows、Linux等操作系统分配和调度资源的程序，很像一个普通程序。第二类虚拟机管理程序伪装成具有CPU和各种设备的完整计算机。VMware Workstation是典型的第二类虚拟机管理程序。

     运行在两类虚拟机管理程序上的操作系统都称为客户操作系统。对于第二类虚拟机管理程序，运行在底层硬件上的操作系统称为宿主操作系统。

     第一类虚拟化技术称为裸金属架构，第二类虚拟化技术称为寄居架构。

### 1.6.2 习题

1.   用( )设计的操作系统结构清晰且便于调试

     A. 分层式架构																B. 模块化架构

     C. 微内核架构																D. 宏内核架构

A，分层式结构简化了系统的设计和实现，每层只能调用紧邻它的底层的功能和服务；便于系统的调试和验证，在调试某层时发现错误，那么错误应在这层上，这是因为其低层都已调试好。



5.   对于以下五种服务，在采用微内核结构的操作系统中，( )不宜放在微内核中

     I. 进程间通信机制			II. 低级I/O		III. 低级进程管理和调度

     IV. 中断和陷入处理			V. 文件系统服务

     A. I、II和III				B. II和V			C. V				D. IV和V

C，进程(线程)之间的通信功能是微内核最频繁使用的功能，因此几乎所有微内核OS都将其放入微内核。低级I/O和硬件紧密相关，因此放入微内核。低级进程管理和调度属于调度功能的机制部分，应将其放入微内核。微内核OS将与硬件紧密相关的一小部分放入微内核处理，此时微内核的主要功能是捕获所发生的中断和陷入事件，并进行中断响应处理，识别中断或陷入的事件后，再发送给相关的服务器处理，故中断和陷入处理也应放入微内核。



6.   相对于传统操作系统结构，采用微内核结构设计和实现操作系统有诸多好处，下列是微内核结构的特点有( )

     I. 使系统更高效				II. 添加系统服务时，不必修改内核

     III. 微内核结构没有单一内核稳定				IV. 使系统更可靠

     A. I、III、IV					B. I、II、IV				C. II、IV				D. I、IV

C，微内核结构需要频繁地在管态和目态之间进行切换，操作系统的执行开销相对偏大，那些移出内核的操作系统代码根据分层的原则被划分成若干服务程序，它们的执行相互独立，交互则都借助于微内核进行通信，影响了系统的效率，I错误。由于内核的服务变少，且一般来说内核的服务越少内核越稳定，所以III错误



7.   下列关于操作系统结构的说法中，正确的是( )

     I. 当前广泛使用的Windows XP操作系统，采用的是分层式OS结构

     II. 模块化的OS结构设计的基本原则是，每一层都仅使用其底层所提供的功能和服务，这样就使系统的调试和验证都变的容易

     III. 由于微内核结构能有效支持多处理机运行，故非常适合于分布式系统环境

     IV. 采用微内核结构设计和实现操作系统具有诸多好处，如添加系统服务时，不必修改内核、使系统更高效

     A. I和II						B. I和III							C. III						D. III和IV

C，Windows是宏内核，I错误；II描述的层次化架构的原则。在微内核架构中，客户和服务器之间、服务器和服务器之间的通信采用消息传递机制，这就使得微内核系统能很好地支持分布式系统，III正确；添加系统服务时不必修改内核，这就使得微内核架构的可扩展性和灵活性更强；微内核架构的主要问题是性能问题，“使系统更高效”显然错误



9.   计算机操作系统的引导程序位于( )

     A. 主板BIOS				B. 片外Cache 				C. 主存ROM区			D. 硬盘

​	D，操作系统的引导程序位于磁盘活动分区的引导扇区中。引导程序分为两种：一种是位于ROM中的自举程序，用于启动具体的设备；另一种是位于装有操作系统硬盘的活动分区的引导扇区中引导程序，用于引导操作系统。



10.   计算机的启动过程是( )

      1、CPU加电，CS:IP 指向FFFF0H； 2、进行操作系统引导； 3、执行JMP指令跳转到BIOS；4、登记BIOS中断例程入口地址；5、硬件自检

      A. 12345					B. 13542 				C. 13452					D. 15342

C，CPU激活后，会从最顶端的地址FFFF0H获得第一条指令来执行，这个地址仅仅只有16字节，放不下一段程序，所以是一条JMP指令，以跳到更低地址去执行BIOS程序。BIOS程序在内存最开始的空间构建中断向量表和相应服务程序，在后续POST过程中要用到中断调用等功能。然后进行通电自检POST以检测硬件是否有故障。完成POST后，BIOS需要在硬盘、光驱或软驱等存储设备搜寻操作系统内核的位置以启动操作系统



11.   检查分区表是否正确，确定哪个分区为活动分区，并在程序结束时将该分区的启动程序调入内存加以执行，这是( )的任务

      A. MBR					B. 引导程序				C. 操作系统					D. BIOS

A，BIOS将控制权交给排在首位的启动设备后，CPU将该设备主引导扇区的内容加载到内存中，然后由MBR检查分区表，查找活动分区，并将该分区的引导扇区的内容加载到内存加以执行。



12.   下列关于虚拟机的说法中，正确的是( )

      I. 虚拟机可以用软件实现					II. 虚拟机可以用硬件实现

      III. 多台虚拟机可同时运行在同一物理机器上，它实现了真正的并行

      A. I和II					B. I和III						C. I									D. I、II和III

A，虚拟机既可以用硬件实现也可以用软件实现